{"version":3,"file":"thed3-bundle.js","sources":["../lib/_state.js","../lib/dorlingmap-data-transform.js","../lib/dorlingmap-collide.js","../lib/dorlingmap-events-mouseover.js","../lib/dorlingmap-events-mouseout.js","../lib/u-legend-gradient.js","../lib/uc-circle-legend.js","../lib/u-legend-circular.js","../lib/dorlingmap-component.js","../lib/dorlingmap-render.js","../lib/_update.js","../lib/update-events.js","../lib/u-get-set.js","../lib/_init.js","../lib/index.js"],"sourcesContent":["// keep track of state\n// null values will get set at runtime\n\nlet defaults = {\n    dev: false, // boolean to toggle dev features\n    svgWidth: 800,\n    svgHeight: 800,\n    keyCircleArea: null, // key for data related to area\n    keyCircleColour: null, // key for data related to colour rendering\n    colourRange: ['#fde0dd','#fa9fb5','#c51b8a'],\n    id: null,\n    data: null,\n    areaDomain: null, // domain [min, mean, max]\n    colorDomain: null, // domain [min, mean, max]\n    coordinatesData: null,\n    minX: null,\n    maxX: null,\n    minY: null,\n    maxY: null\n};\n\nexport default defaults;","// data transform/clean required for chart\n\nexport default function (ref) {\n\n    let coords = [];\n    let xs = [];\n    let ys = [];\n    let alias;\n\n    // access data\n    let coordinates = ref.coordinatesData;\n\n    for (alias in coordinates) {\n        coords.push(coordinates[alias]);\n        xs.push(coordinates[alias][0]);\n        ys.push(coordinates[alias][1]);\n    }\n\n    // create values for x an y scales\n    ref.minX = d3.min(xs);\n    ref.maxX = d3.max(xs);\n    ref.minY = d3.min(ys);\n    ref.maxY = d3.max(ys);\n\n\n}","// Adapted from http://bl.ocks.org/3116713\nlet collide = function(alpha, nodes, scale, padding) {\n    let quadtree = d3.geom.quadtree(nodes);\n    return function(d) {\n        let r = d.radius + scale.domain()[1] + padding;\n        let nx1 = d.x - r;\n        let nx2 = d.x + r;\n        let ny1 = d.y - r;\n        let ny2 = d.y + r;\n        quadtree.visit(function(quad, x1, y1, x2, y2) {\n            if (quad.point && quad.point !== d) {\n                let x = d.x - quad.point.x;\n                let y = d.y - quad.point.y;\n                let l = Math.sqrt(x * x + y * y);\n                let r = d.radius + quad.point.radius + padding;\n                if (l < r) {\n                    l = (l - r) / l * alpha;\n                    d.x -= x *= l;\n                    d.y -= y *= l;\n                    quad.point.x += x;\n                    quad.point.y += y;\n                }\n            }\n            return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;\n        });\n    };\n};\n\nexport default collide;","// mouseover\n\nexport default function (d, ref) {\n\n    d3.select('.js-info-1').text(d.country);\n    d3.select('.js-info-2').text('value that sets area: ' + d[ref.keyCircleArea]);\n    d3.select('.js-info-3').text('value that sets colour: ' + d[ref.keyCircleColour]);\n\n    d3.selectAll('.country-circles').transition().duration(200).ease('quad')\n        .style({\n            stroke: '#ccc',\n            'stroke-width': 0\n        });\n\n    d3.select('#' + d.alias).transition().duration(500).ease('elastic')\n        .style({\n            'stroke-width': 6\n        });\n\n    // console.log(d);\n\n}","// mouseout\n\nexport default function (d, ref) {\n\n    d3.select('.js-info-1').text('');\n    d3.select('.js-info-2').text('');\n    d3.select('.js-info-3').text('');\n\n    d3.selectAll('.country-circles').transition().style({\n            'stroke-width': 0\n        });\n    // console.log(d);\n\n}","// pass in svg and ref onject with domains etc\n\nexport default function (svg, ref) {\n\n    const width = 160,\n        height = 12;\n    // append a defs (for definition) element to your SVG\n    let defs = svg.append('defs');\n\n    // append a linearGradient element to the defs and give it a unique id\n    let linearGradient = defs.append('linearGradient')\n        .attr('id', 'linear-gradient');\n\n    // horizontal gradient\n    linearGradient\n        .attr({\n            x1: '0%',\n            y1: '0%',\n            x2: '100%',\n            y2: '0%'\n        });\n\n    // set the color for the start (0%)\n    linearGradient.append('stop') \n        .attr('offset', '0%')   \n        .attr('stop-color', ref.colourRange[0]); \n\n    // set the color for the mid (50%)\n    linearGradient.append('stop') \n        .attr('offset', '50%')   \n        .attr('stop-color', ref.colourRange[1]); \n\n    // set the color for the end (100%)\n    linearGradient.append('stop') \n        .attr('offset', '100%')   \n        .attr('stop-color', ref.colourRange[2]); \n\n    // draw the rectangle and fill with gradient\n    // color Legend container\n    let legendsvg = svg.selectAll('.legend-gradient')\n        .data([0]);\n\n    legendsvg.enter().append('g')\n        .attr({\n            class: 'legend-gradient',\n            transform: 'translate(' + 30 + ',' + (ref.svgHeight -30) + ')'\n        })\n        .append('rect')\n        .attr({\n            class: 'legendRect',\n            width: width,\n            height: height,\n            x: 0,\n            y: 0\n        })\n        .style('fill', 'url(#linear-gradient)');\n\n    // append title\n    // legendsvg.append('text')\n    //     .attr('class', 'legendTitle')\n    //     .attr('x', 0)\n    //     .attr('y', -10)\n    //     .style('text-anchor', 'middle')\n    //     .text('Range');\n\n    console.log('colourRange[2]', ref.colorDomain[2]);\n\n    // set scale for x-axis\n    let xScale = d3.scale.linear()\n        .domain([0, ref.colorDomain[2]] )\n        .range([0, width]);\n\n    // define x-axis\n    let xAxis = d3.svg.axis()\n        .orient('bottom')\n        .ticks(4)\n        .scale(xScale);\n\n    // set up X axis\n    let applyAxis = legendsvg.selectAll('.axis')\n        .data([0]);\n\n    applyAxis.enter().append('g')\n        .attr('class', 'axis')\n        .attr('transform', 'translate(0,' + (12) + ')');\n    // update\n    applyAxis.call(xAxis);\n\n}\n\n","// adapted from http://bl.ocks.org/aubergene/4723857\n// circleLegend\nexport default function(text, width) {\n\n    var scale,\n        orient = 'left',\n        tickPadding = 3,\n        tickExtend = 5,\n        tickArguments_ = [10],\n        tickValues = null,\n        tickFormat_,\n        ε = 1e-6;\n\n\n    function key(selection) {\n        selection.each(function() {\n            var g = d3.select(this);\n\n            g.attr('class', 'circle-legend');\n\n            // Stash a snapshot of the new scale, and retrieve the old snapshot.\n            var scale0 = this.__chart__ || scale,\n                scale1 = this.__chart__ = scale.copy();\n\n            // Ticks, or domain values for ordinal scales.\n            let ticks = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments_) : scale.domain()) : tickValues;\n            ticks = ticks.slice().filter(d => d > 0).sort(d3.descending);\n            let tickFormat = tickFormat_ == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments_) : String) : tickFormat_;\n            let tick = g.selectAll('.tick').data(ticks, scale1);\n            let tickEnter = tick.enter().insert('g', '.tick').attr('class', 'tick').style('opacity', ε);\n            let tickExit = d3.transition(tick.exit()).style('opacity', ε).remove();\n            let tickUpdate = d3.transition(tick.order()).style('opacity', 1);\n            let tickTransform;\n\n            tickEnter.each(function(tick) {\n                var gg = d3.select(this);\n\n                var tickText = tickFormat(tick);\n\n                if (!tickText) return;\n\n                gg.append('circle')\n                    .attr('cx', 0)\n                    .attr('cy', 0)\n                    .attr('r', scale(tick));\n\n                gg.append('line')\n                    .attr('y1', 0)\n                    .attr('y2', 0)\n                    .attr('stroke', '#000')\n                    .text(tick);\n\n                gg.append('text')\n                    .attr('dy', '.35em')\n                    .style('text-anchor', 'left' == orient ? 'end' : 'start')\n                    .text(tickText);\n\n            });\n            tickEnter.call(d3_svg_legend, scale0);\n            tickUpdate.call(d3_svg_legend, scale1);\n            tickExit.call(d3_svg_legend, scale1);\n\n            function d3_svg_legend(selection, scale) {\n                selection.select('circle')\n                    .attr('r', scale);\n\n                var x2 = scale(ticks[0]) + tickExtend;\n                var sign = 'left' == orient ? -1 : 1;\n\n                selection.select('text')\n                    .attr('transform', 'translate(' + (x2 + tickPadding) * sign + ', 0)');\n\n                selection.select('line')\n                    .attr('x1', function(d) {\n                        return scale(d) * sign;\n                    })\n                    .attr('x2', x2 * sign);\n\n                selection.attr('transform', function(d) {\n                    return 'translate(0,' + -scale(d) + ')';\n                });\n            }\n\n        });\n    }\n\n    key.scale = function(value) {\n        if (!arguments.length) return scale;\n        scale = value;\n        return key;\n    };\n\n    key.orient = function(value) {\n        if (!arguments.length) return orient;\n        orient = value;\n        return key;\n    };\n\n    key.ticks = function() {\n        if (!arguments.length) return tickArguments_;\n        tickArguments_ = arguments;\n        return key;\n    };\n\n    key.tickFormat = function(x) {\n        if (!arguments.length) return tickFormat_;\n        tickFormat_ = x;\n        return key;\n    };\n\n    key.tickValues = function(x) {\n        if (!arguments.length) return tickValues;\n        tickValues = x;\n        return key;\n    };\n\n    key.tickPadding = function(x) {\n        if (!arguments.length) return tickPadding;\n        tickPadding = +x;\n        return key;\n    };\n\n    key.tickExtend = function(x) {\n        if (!arguments.length) return tickExtend;\n        tickExtend = +x;\n        return key;\n    };\n\n    key.width = function(value) {\n        if (!arguments.length) return width;\n        width = value;\n        return key;\n    };\n\n    key.height = function(value) {\n        if (!arguments.length) return height;\n        height = value;\n        return key;\n    };\n\n    return key;\n}","import circleLegend from './uc-circle-legend';\n// http://bl.ocks.org/aubergene/4723857\n\n// domainArray is an array of [min, mean, max]\n\nexport default function (_svg, ref) {\n\n    let margin = {top: 20, right: 100, bottom: 20, left: 160};\n    \n    let svg = _svg.selectAll('.legend-circle')\n        .data([0]);\n\n    svg.enter().append('g')\n        .attr({\n            class: 'legend-circle',\n            transform: 'translate(' + margin.left + ',' + (ref.svgHeight - 200) + ')'\n        });\n\n    let scale = d3.scale.sqrt()\n        .domain([0, ref.areaDomain[2]])\n        .range([0, 80]);\n\n    let circleKey = circleLegend()\n        .scale(scale)\n        .tickValues([ref.areaDomain[0], ref.areaDomain[1], (ref.areaDomain[2]/2)])\n        .tickPadding(5)\n        .orient('right');\n\n    let renderCircleKey = svg.selectAll('.legend-circle')\n        .data([0]);\n\n    renderCircleKey.enter().append('g')\n        .attr({\n            class: 'legend-circle',\n            transform: 'translate(100, 200)'\n        });\n    // update\n    svg.select('.circle-legend').remove();\n    renderCircleKey.call(circleKey);\n\n}","import collide from './dorlingmap-collide';\nimport mouseover from './dorlingmap-events-mouseover';\nimport mouseout from './dorlingmap-events-mouseout';\nimport legendGradient from './u-legend-gradient';\nimport legendCircular from './u-legend-circular';\n\n// pass in a object of any opts/params \nexport default function(ref) {\n\n    //________________________________________________\n    // PARAMS  \n    //________________________________________________\n    // let vpWidth = ref.vpWidth;\n\n    let k;\n    let node;\n    let nodes = [];\n\n    let pixelLoc = d3.geo.mercator();\n    pixelLoc.scale(100);\n\n    //________________________________________________\n    // set up colour scales\n    //________________________________________________\n\n    // get min and max for colour range\n    let colorDomain = d3.extent(ref.data, (d) => d[ref.keyCircleColour]);\n    // get the mean\n    let colorDomainMean = _.meanBy(ref.data, ref.keyCircleColour);\n    // insert the colorDomain\n    colorDomain.splice(1, 0, colorDomainMean);\n    // update references \n    ref.colorDomain = colorDomain;\n    console.log('colorDomain', colorDomain);\n\n    let colorScale = d3.scale.linear()\n        .domain(colorDomain)\n        .range(ref.colourRange)\n        .interpolate(d3.interpolateHcl);\n\n    //________________________________________________\n    // GET/SET defaults \n    //________________________________________________\n\n    // getter setter default and private variables\n    let svg,\n        width = 800,\n        height = 800, \n        padding = 10,\n        margin = { top: 10, right: 10, bottom: 10, left: 10};\n\n    let dispatch = d3.dispatch('customHover');\n\n    //________________________________________________\n    // RENDER \n    //________________________________________________\n\n    function exports(_selection) {\n\n        // // access data\n        let countries = ref.data;\n        let coordinates = ref.coordinatesData;\n\n        // create scales\n        let xScale = d3.scale.linear().domain([ref.minX, ref.maxX]).range([-50, -30]);\n        let yScale = d3.scale.linear().domain([ref.minY, ref.maxY]).range([-20, -10]);\n\n        // only add svg if doesn't already exist\n        svg = _selection.selectAll('svg')\n            .data([0]);\n\n        svg.enter().append('svg')\n            .attr({\n                 class: 'dorling-chart',\n                width: width,\n                height: (height + margin.top + margin.bottom)\n            });\n\n        //________________________________________________\n        // set up area scales\n        //________________________________________________\n\n        //scale for circle areas\n        // get min and max for colour range\n        let areaDomain = d3.extent(ref.data, (d) => d[ref.keyCircleArea]);\n        // get the mean\n        let areaDomainMean = _.meanBy(ref.data, ref.keyCircleArea);\n        // insert the colorDomain\n        areaDomain.splice(1, 0, areaDomainMean);\n        // update reference\n        ref.areaDomain = areaDomain;\n        console.log('areaDomain', areaDomain);\n        // apply to scale\n        let pointScale = d3.scale.sqrt().domain([0, areaDomain[2]]).range([0, 80]);\n\n        //________________________________________________\n\n        var d3_geom_voronoi = d3.geom.voronoi()\n            .x((d) => d.x)\n            .y((d) => d.y);\n\n        var path = svg.selectAll('path');\n\n        _.times(countries.length, i => {\n            node = countries[i];\n            node.coordinates = coordinates[node.alias];\n            if (!_.isUndefined(node.coordinates)[0]) {\n                node.cx = xScale(pixelLoc(node.coordinates)[0]);\n            } else {\n                console.log('can\\'t find');\n            }\n            \n            node.cy = yScale(pixelLoc(node.coordinates)[1]);\n            node.radius = pointScale(node[ref.keyCircleArea]);\n            nodes.push(node);\n        });\n\n        let force = d3.layout.force()\n            .nodes(nodes)\n            .links([])\n            .size([width, height])\n            .charge(d => -Math.pow(d.radius * 5.0, 2.0) / 8)\n            .gravity(1.8)\n            .on('tick', (e) => {\n                k = 10 * e.alpha;\n                _.times(nodes.length, i => {\n                    nodes[i].x += k * nodes[i].cx;\n                    nodes[i].y += k * nodes[i].cy;\n                });\n                svg.selectAll('.country-circles')\n                    .each(collide(0.1, nodes, pointScale, padding))\n                    .attr({\n                        cx: d => d.x,\n                        cy: d => d.y\n                    });\n\n                svg.selectAll('.country-labels')\n                    .attr({\n                        x: d => d.x,\n                        y: d => d.y + 5,\n                        opacity: d => (d.radius < 17) ? 0 : 1\n                    });\n\n                path = path.data(d3_geom_voronoi(nodes));\n                path.enter().append('path');\n\n                path\n                    .style('fill', 'none')\n                    .style('stroke', () => (ref.dev) ? 'pink' : 'none')\n                    .style('pointer-events', 'all');\n\n                path.attr('d', (d) => 'M' + d.join('L') + 'Z')\n                    .datum((d) => d.point)\n                    .attr('class', (d,i) => ' v-' + i)\n                    .on('mouseover', (d) => mouseover(d, ref))\n                    .on('mouseout', (d) => mouseout(d, ref));\n\n                path.exit().remove();\n            })\n            .start();\n\n        let circles = svg.selectAll('.country-circles')\n            .data(nodes);\n            \n        circles.enter().append('svg:circle');\n\n        circles.attr({\n                cx: d => d.cx,\n                cy: d => d.cy,\n                r: d => d.radius,\n                class: d => d.continent.replace(' ', '') + ' ' + 'country-circles',\n                id: d => d.alias,\n                fill: (d) => colorScale(d[ref.keyCircleColour]),\n                stroke: '#fff', // not shown but is on mouseover\n                'stroke-width': 0\n            });\n\n        circles.exit().transition().remove();\n\n        let labels = svg.selectAll('.country-labels')\n            .data(nodes);\n\n        labels.enter().append('svg:text')\n            .attr('class', 'country-labels');\n\n        labels.text(d => d.alias);\n\n        labels.exit().remove();\n\n        // add a gradient legend\n        legendGradient(svg, ref);\n        // add a circular legend\n        legendCircular(svg, ref);\n\n    } // exports\n\n    //________________________________________________\n    // GET/SET  \n    //________________________________________________\n\n    exports.width = function(_x) {\n        if (!arguments.length) return width;\n        width = _x;\n        return this;\n    };\n    exports.height = function(_x) {\n        if (!arguments.length) return height;\n        height = _x;\n        return this;\n    };\n    exports.margin = function(_x) {\n        if (!arguments.length) return margin;\n        margin = _x;\n        return this;\n    };\n\n    d3.rebind(exports, dispatch, 'on');\n    return exports;\n\n\n}\n\n\n","// renders chart\nimport dorlingMap from './dorlingmap-component';\n\n// `ref` is object inherited from _state.js\nexport default function (ref) {\n\n\n    // call chart \n    // can override settings here (GET/SET)\n    let chart = dorlingMap(ref)\n        .width(ref.svgWidth)\n        .height(ref.svgHeight);\n\n    // apply chart to DOM\n    d3.select(ref.id)\n        .datum(ref.data)\n        .call(chart);\n\n}\n","// render charts and run updates\nimport dorlingMap from './dorlingmap-component';\nimport dorlingMapRender from './dorlingmap-render';\n// import dorlingMapReset  from './dorlingmap-reset';\n\n\nexport default function (ref) {\n\n    // update calls for everything\n    // can loop through all charts\n\n    // render chart\n    dorlingMapRender(ref);\n\n    // apply any tidying up\n    // dorlingMapReset(ref);\n\n} ","// event handlers\nexport default function (ref) {\n\n    // add event listeners\n\n}","// https://gist.github.com/gneatgeek/5892586\n/**\n * getSet creates a getter/setter function for a re-usable D3.js component. \n *\n * @method getSet\n * @param  {string}   option    - the name of the object in the string you want agetter/setter for.\n * @param  {function} component - the D3 component this getter/setter relates to.\n *\n * @return {mixed} The value of the option or the component.\n */\nfunction getSet(option, component) {\n  return function (_) {\n    if (! arguments.length) {\n      return this[option];\n    }\n\n    this[option] = _;\n\n    return component;\n  };\n}\n\nexport default getSet;\n\n\n","// initiation abstraction for chart\nimport defaults from './_state'; // all defaults\nimport dataTransform  from './dorlingmap-data-transform';\nimport update from './_update';\nimport events from './update-events';\nimport getSet from './u-get-set';\n\n\nexport default function () {\n\n    const instance = {};\n\n    \n    // api overrides\n    let opts = {\n        id: null, // selection element for container\n        dataJson: null, // path to JSON file\n        data: null, // js object directly\n        dev: null, // boolean to toggle dev features\n        coordinatesData: null, // path to JSON coordinates file\n        keyCircleArea: null,\n        keyCircleColour: null,\n        colourRange: null,\n        levels: null,\n        svgHeight: null,\n        svgWidth: null\n    };\n\n    // reference all data and configurations\n    // pure prototypal inheritance \n    const ref = Object.create(defaults);\n\n    // render/update \n    instance.render = function() {\n\n        const q = d3.queue();\n\n        // reference configurations\n        updateRef();\n\n        // check if json url or data object\n        if (_.isNull(opts.dataJson)) {\n            q\n                .defer(d3.json, coordinatesData)\n                .await(function(error, file1) { \n                    // make data available across scope\n                    ref.coordinatesData = file1;\n                    ref.data = opts.data;\n                    renderCalls();\n            });\n        } else {\n            q\n                .defer(d3.json, opts.coordinatesData)\n                .defer(d3.json, opts.dataJson)\n                .await(function(error, file1, file2) { \n                    // make data available across scope\n                    ref.coordinatesData = file1;\n                    ref.data = file2;\n                    renderCalls();\n            });\n        }\n\n        console.log(ref);\n\n        return instance;\n    };\n\n    function updateRef() {\n        // chart specific api overrides \n        _.forIn(opts, function(value, key) {\n            if(!_.isNull(opts[key])) ref[key] = opts[key];\n        });\n    }\n\n    function renderCalls() {\n\n        // clean data & check null values/ transform etc\n        dataTransform(ref);\n\n        // trigger event listeners\n        events(ref);\n\n        // run the visualisation\n        update(ref);\n    }\n\n\n    // api for chart, all items in `opts` object made into get-set\n    for (let key in opts) {\n        instance[key] = getSet(key, instance).bind(opts);\n    }\n\n    return instance;\n}","// *****************************\n// track state (only for DEV)\n// *****************************\n// import _state from './_state';\n\n// export function state() {\n//     return _state;\n// }\n// *****************************\n// render \n// *****************************\nimport _init from './_init';\n\nexport function initDorling() {\n    return _init();\n}\n// *****************************\n// UPDATE\n// *****************************\n// import _update from './_update';\n\n// export function update() {\n//     return _update();\n// }\n\n\n\n\n\n"],"names":[],"mappings":"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"}